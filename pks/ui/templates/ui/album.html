<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- 위 3개의 메타 태그는 *반드시* head 태그의 처음에 와야합니다; 어떤 다른 콘텐츠들은 반드시 이 태그들 *다음에* 와야 합니다 -->

    <title>{{ etc.title }}</title>

    <meta name="description" content="{{ etc.desc }}" />
    <meta name="keywords" content="{% for tag in uplace.userPost.tags %}{{ tag.content }}, {% endfor %}" />
    <meta property="og:title" content="{{ etc.title }}" />
    <meta property="og:image" content="{{ uplace.userPost.image.url_summarized }}" />
    <meta property="og:site_name" content="photo.place" />
    <meta property="og:url" content="{{ etc.url }}" />
    <meta property="og:description" content="{{ etc.desc }}" />

    <!-- 부트스트랩 -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- 기타 스타일 시트 -->
    <link href="/static/css/style.css" rel="stylesheet">

    <!-- IE8 에서 HTML5 요소와 미디어 쿼리를 위한 HTML5 shim 와 Respond.js -->
    <!-- WARNING: Respond.js 는 당신이 file:// 을 통해 페이지를 볼 때는 동작하지 않습니다. -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body ng-app="placeApp">
    <div class="container-fluid">
      <nav class="navbar navbar-default navbar-fixed-top" id="app-banner">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="#"  data-toggle="modal" data-target="#modalAppInstall">
              <img alt="Brand" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAWJQTFRF/wBi/wBh/wBg/wFj/wFi/yV5/0mP/0iP/zGA/wVk/xty/26m/wdm/wpo/0CJ/0qP/0KL/xlx/1qZ/z6I/4Sz/63N/32v/6vL/3Op/yp8/6fI/wtn/yd6/8Xb/4Oz/4+6/67N/yN3/4e1/16c/wBf/4i2/2Kd/wBc/zOB/7bS/zqG/7TR/2Wg/3+w/0yR/w9q/1GU/w5o/5nA/2Ke/4i1/2uk/1CT/zSC/8HZ/12b/7jT/xtz/3uu/4y4/0eO/6HF/1ua/7HP/xpy/xZw/6jK/1OV/4W0/8Pa/5rB/6TH/0SM/yh6/wpm/w1o/6bI/zWD/6vM/yV3/0iN/9Di/6DF/6LG/w1q/yl7/6fJ/6XI/zmF/63M/x5z/wBd/0GJ/5vC/y1+/xVv/wRk/4m2/2Oe/wBe/5W+/2yk/yF2/425/6/N/w5q/1iY/whn/5a+/3Ko/3Go/wlo/zyH/wJi/wFhAAAAQZ34LwAAAAFiS0dEdahqmPsAAAAJcEhZcwAAAEgAAABIAEbJaz4AAAD0SURBVDjLY2AYBaNgcAJGJiYmBgZmhACQz8jAzIKhkJWNnYOTi5sHxufl4xcQZBISZkJTxyQiKiYuISklDTQXZDiTjKycvIKikrIKukJVNXUNTS1tHV09Zn1lMQNOSQVDRiNjEUyFJqY8ZgrmFsqWVtY2tnb2DjKOTs4urm5YTHT38PTylvLx9fMPCFQPMpIMDgkVCTPBolDCOYwpPII3LDIqOiY2Lj5BWyYxiSkZi8KUVAZGkEI/77T0jExT76xsRgYsChlz+IDe5UrnyU1PVFTKy892KigEiRahBw8DCzhomUGIsZinhBES9pjhPQpGAYkAAGJ6JRzooi88AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE2LTA5LTA1VDA3OjE1OjIwKzAwOjAwtGNQJQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNi0wOS0wNVQwNzoxNToyMCswMDowMMU+6JkAAAAASUVORK5CYII=" height="40" width="40">
            </a>
            <p class="navbar-text">
              오늘 우리 재미있었어~^^<br>
              같이 찍은 사진 포플로 보낸다~ 조만간 또 뭉쳐!<br>
              사진 공유는 포플!<br>
            </p>
            <button type="button" class="btn btn-default navbar-btn" onclick="hideAppBanner()"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
          </div>
        </div>
      </nav>
      <!-- 프로필 정보 표시 영역 -->
      <div class="list">
        <div class="item item-avatar item-button-right" href="#">
          <!-- profile: image -->
          <img src="{{ ru.data.profileImg }}">
          <!-- profile: nickname -->
          <h2><strong>{{ ru.nickname }}</strong></h2>
          <!-- 작성 날짜 : 1분내->방금, 1시간내->X분전, 하루이내->X시간전, 7일내->X일전, 기타->YYYY.mm.DD -->
          <small>{{ etc.datetime_desc }}</small>
          <a class="button button-outline button-stable icon ion-ios-more" style="top:15px;">
          </a>
        </div>
      </div>
      <!-- userPost의 note.content 표시 부분 -->
      <div class="row">
        <div class="col-xs-12 note">
          {% for note in uplace.userPost.notes %}
            {% if not note.is_only_for_tag %}
              {{ note.content }}<br/>
            {% endif %}
          {% endfor %}
        </div>
      </div>
      <!-- 이미지 표시 부분 -->
      {% for image in uplace.userPost.images %}
        {% if forloop.counter0|divisibleby:3 %}
          <div class="row image-container">
        {% endif %}
          <div class="col-xs-4">
            <a class="thumbnail" href="#" data-toggle="modal" data-target="#modalImageViewer">
              <img src="{{ image.url_summarized }}">
              <!--img src="{{ image.url_for_access }}"-->
            </a>
          </div>
        {% if forloop.counter0|add:1|divisibleby:3 or forloop.last %}
          </div>
        {% endif %}
      {% endfor %}

      <div class="border" style="margin-top:20px;width:100%;padding:10px;">
        {% if uplace.placePost %}
          <h4 id="place-name">{{ uplace.placePost.name }}</h4>
          <address><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span><span id="place-addr">{{ uplace.placePost.addr }}</span></address>
        {% endif %}
        {% for tag in uplace.userPost.tags %}
          <span>#{{ tag.content }}</span>{% if not forloop.last %}, &nbsp; {% endif %}
        {% endfor %}
      </div>

      <div class="row">
        <div class="col-xs-12">&nbsp;</div>
      </div>

      <div class="row">
        <div class="col-xs-12">&nbsp;</div>
      </div>
      <div class="list-group" ng-controller="blogSearchCtrl">
        <a class="list-group-item pp-active">관련 정보</a>
        <a class="list-group-item" ng-repeat="result in searchResults"  href="{$result.link$}">
          <h4>{$result.title$} - <small>{$result.author$}</small></h4>
				  <p>{$result.description$}</p>
        </a>
        <!--a class="list-group-item">
          <h4>[판교맛집] 신하균 동생네 떡볶이 혜선이떡볶이 - <small>◕‿◕좋아서하는 블로그</small></h4>
				  <p>경기도 성남시 분당구 삼평동 660 골드타워 2층 혜선이떡볶이 신하균 여동생이 한다는 그 떡볶이집에 다녀왔다 가게 안은 어마어마해 레고들 난리나 난리나 그리고 피규어들 떡볶이는... 좀 많이 칼칼하지만 내 스타일 ♥ 이런...</p>
        </a>
        <a class="list-group-item">
          <h4>[판교맛집] 신하균 동생네 떡볶이 혜선이떡볶이 - <small>◕‿◕좋아서하는 블로그</small></h4>
				  <p>경기도 성남시 분당구 삼평동 660 골드타워 2층 혜선이떡볶이 신하균 여동생이 한다는 그 떡볶이집에 다녀왔다 가게 안은 어마어마해 레고들 난리나 난리나 그리고 피규어들 떡볶이는... 좀 많이 칼칼하지만 내 스타일 ♥ 이런...</p>
        </a>
        <a class="list-group-item">
          <h4>[판교맛집] 신하균 동생네 떡볶이 혜선이떡볶이 - <small>◕‿◕좋아서하는 블로그</small></h4>
				  <p>경기도 성남시 분당구 삼평동 660 골드타워 2층 혜선이떡볶이 신하균 여동생이 한다는 그 떡볶이집에 다녀왔다 가게 안은 어마어마해 레고들 난리나 난리나 그리고 피규어들 떡볶이는... 좀 많이 칼칼하지만 내 스타일 ♥ 이런...</p>
        </a>
        <a class="list-group-item">
          <h4>[판교맛집] 신하균 동생네 떡볶이 혜선이떡볶이 - <small>◕‿◕좋아서하는 블로그</small></h4>
				  <p>경기도 성남시 분당구 삼평동 660 골드타워 2층 혜선이떡볶이 신하균 여동생이 한다는 그 떡볶이집에 다녀왔다 가게 안은 어마어마해 레고들 난리나 난리나 그리고 피규어들 떡볶이는... 좀 많이 칼칼하지만 내 스타일 ♥ 이런...</p>
        </a-->
      </div>
      <!-- <button type="button" class="btn btn-primary btn-lg btn-block">사진 공유 하기</button> -->
    </div>
    <div class="row">
      <div class="col-xs-12">&nbsp;</div>
    </div>
    <div class="row">
      <div class="col-xs-12">&nbsp;</div>
    </div>

    <div class="fixed-footer">
      <div class="btn-group btn-group-justified" role="group" aria-label="...">
        {% if uplace.placePost %}
          <div class="btn-group" role="group">
            <button type="button" class="btn" data-toggle="modal" data-target="#modalMap" data-location-name="{{ uplace.placePost.name }}">지도</button>
          </div>
        {% endif %}
        <div class="btn-group" role="group">
          <button type="button" class="btn" data-toggle="modal" data-target="#modalBookmark">저장</button>
        </div>
        <div class="btn-group" role="group">
          <button type="button" class="btn" data-toggle="modal" data-target="#modalShare">공유</button>
        </div>
      </div>
    </div>

    <!-- Modal for App Install -->
    <div class="modal fade" id="modalAppInstall" tabindex="-1" role="dialog" aria-labelledby="modalAppInstallLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content" role="document">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="modalAppInstallLabel"></h4>
          </div>
          <p class="content-text">
            포플로 앨범을 공유하고, 공유받은 앨범을 저장하세요.
          </p>
          <p class="download-banner">
            <a href="#">
              <img src="/static/img/download_AppStore.png" class="AppStore-banner">
            </a>
            <a href="#">
              <img src="/static/img/download_GooglePlay.png" class="GooglePlay-banner">
            </a>
          </p>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for Image Viewer -->
    <div class="modal fade" id="modalImageViewer" tabindex="-1" role="dialog" aria-labelledby="modalImageViewerLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content" role="document">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="modalImageViewerLabel">사진 보기</h4>
          </div>
          <img src="http://placekoob.com/media/rfs/2016/09/29/00000157755635B90000000007E6EE19.rf_image.jpg" alt="...">
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for Bookmark -->
    <div class="modal fade" id="modalBookmark" tabindex="-1" role="dialog" aria-labelledby="modalBookmarkLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content" role="document">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="modalBookmarkLabel">성공</h4>
          </div>
          <div class="modal-body">
            즐겨찾기에 추가되었습니다.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for Map -->
    <div class="modal fade" id="modalMap" tabindex="-1" role="dialog" aria-labelledby="modalMapLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content" role="document">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="modalMapLabel">XXX의 위치</h4>
          </div>
          <div class="modal-body">
            <div id="map" style="width:100%;height:400px;"></div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for Sharing in SNS -->
    <div class="modal fade" id="modalShare" tabindex="-1" role="dialog" aria-labelledby="modalShareLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content" role="document">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="modalShareLabel">공유할 서비스를 선택하세요.</h4>
          </div>
          <div class="modal-body">
            <div class="container-fluid">
              <div class="row">
                <div class="col-xs-4">
                  <button type="button" class="btn btn-default" onclick="shareAndCloseModalDlg(0)">카카오톡</button>
                </div>
                <div class="col-xs-4">
                  <button type="button" class="btn btn-default" onclick="shareAndCloseModalDlg(1)">밴드</button>
                </div>
                <div class="col-xs-4">
                  <button type="button" class="btn btn-default" onclick="shareAndCloseModalDlg(2)">라인</button>
                </div>
              </div>
              <div class="row">
                <div class="col-xs-4">
                  <button type="button" class="btn btn-default" onclick="shareAndCloseModalDlg(3)">카카오스토리</button>
                </div>
                <div class="col-xs-4">
                  <button type="button" class="btn btn-default" onclick="shareAndCloseModalDlg(4)">텔레그램</button>
                </div>
                <div class="col-xs-4">
                  <button type="button" class="btn btn-default" onclick="shareAndCloseModalDlg(5)">페이스북</button>
                </div>
              </div>
              <div class="row">
                <div class="col-xs-4">
                  <button type="button" class="btn btn-default" onclick="shareAndCloseModalDlg(6)">인스타그램</button>
                </div>
                <div class="col-xs-4">
                  <button type="button" class="btn btn-default" onclick="shareAndCloseModalDlg(7)">포스퀘어</button>
                </div>
                <div class="col-xs-4">
                  <button type="button" class="btn btn-default" onclick="shareAndCloseModalDlg(8)">트위터</button>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery (부트스트랩의 자바스크립트 플러그인을 위해 필요합니다) -->
    <script src="/static/js/jquery.min.js"></script>
    <!-- 모든 컴파일된 플러그인을 포함합니다 (아래), 원하지 않는다면 필요한 각각의 파일을 포함하세요 -->
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/angular.min.js"></script>
    <script src="/static/js/app.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDkuFga8fr1c4PjzSAiHaBWo26zvQbtxB8&"></script>
    <script language="javascript">
      'use strict';

      function initMap() {
        var lat = {{ uplace.placePost.lonLat.y }}, lng = {{ uplace.placePost.lonLat.x }};
        var mapOption = {
          center: {
            lat: lat,
            lng: lng
          },
      		zoom: 15,
      		zoomControl: false,
      		mapTypeControl: false,
      		streetViewControl: false
      	};

        var mapObj = new google.maps.Map(document.getElementById('map'), mapOption);
        var markerObj = new google.maps.Marker({
          map: mapObj,
          position: { lat: lat, lng: lng },
          draggable: false,
          zIndex: 9999
        });
      }

      function shareAndCloseModalDlg(index) {
        console.log('The index of clicked button is ' + index);

        //  modal dialog를 닫는 코드
        $('#modalShare').modal('hide');
      }

      function hideAppBanner() {
        $('#app-banner').remove();
        $('body').css('padding-top', 0)
      }

      $('#modalMap').on('shown.bs.modal', function(event) {
        $(this).find('.modal-title').text($(event.relatedTarget).data('location-name') + '의 위치');
        initMap();
      });

      $('#modalImageViewer').on('shown.bs.modal', function(event) {
        $('#modalImageViewer modal-content').css('text-align', 'center');
        $('.modal-content img').css({
          'max-width': document.getElementsByClassName('modal-content')[0].clientWidth - 5
        });
      });

      //  Part for Google Analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-81895826-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
